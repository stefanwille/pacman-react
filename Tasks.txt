- ðŸ˜˜Extract makeGhosts
- ðŸ˜˜Try to remove GameInterface
- ðŸ˜˜Refactor store so that it doesnt get in the way
- ðŸ˜˜Make scatter mode work
  - ðŸ˜˜Warum geht der Ghost nicht von 1/7 nach 1/8?
  - ðŸ˜˜Warum geht der Ghost nach -1/28 statt bei 1/1 stehen zu bleiben?
  - ðŸ˜˜Warum geht die Anzeige kaputt?
  - Have different scatter goals per ghost
- ðŸ˜˜Prevent ghost from going backwards, buy excluding the back direction in the wayfinding frontier
- ðŸ˜˜Break up the CSS into many files
- ðŸ˜˜Add tailwind to remove hacks
- ðŸ˜˜useLocaleStore instead of useMemo
- ðŸ˜˜Make the game display cleanly on a MacBook
- ðŸ˜˜Have a backref from PacMan to Game to access timestamp
- ðŸ˜˜Extract Game.pills into Maze store
- ðŸ˜˜Fix the missing ways at 7/14 and 8/14
- ðŸ˜˜Turn AnimationTestPage into a GamePage that plays the game
- ðŸ˜˜Let the ghosts start in scatter mode
- ðŸ˜˜Implement individual ghosts behaviours in scatter mode
- ðŸ˜˜Ghosts general behaviour:
  - ðŸ˜˜At each tile they choose a new target tile to go toward.
  - ðŸ˜˜Then they inspect all neighbour tiles
  - ðŸ˜˜A tile that is in opposite direction is removed.
  - ðŸ˜˜Tiles in a wall are removed.
  - ðŸ˜˜From the remaining moves, the distance to the target is calculated. The closest one is chosen as the next tile.
  - ðŸ˜˜If there are multiple tiles with the same distance, the tiles are prioritized. Up is highest.
  - ðŸ˜˜Then the new direction is chosen towards the new tile
- ðŸ˜˜When the ghost reaches a position that would make it stand still, choose the first free direction that is not backward instead.
- ðŸ˜˜Make ghost#wayPoints a @computed value - dependent on tileCoordinates and targetTile
- ðŸ˜˜Fix chooseNextTile() / Found no candidate
- ðŸ˜˜Support tunnel
- ðŸ˜˜SShow ghost targets
- ðŸ˜˜Implement individual ghosts behaviours in hunt mode:
  - ðŸ˜˜Blinky: PacMan
  - ðŸ˜˜Pinky: The tile 4 tiles in front of pacman. Only if pacman is facing up, pinkys target is 4 tiles up and 4 tiles to the left.
  - ðŸ˜˜Inky:
    o ðŸ˜˜An intermediate tile is chosen. It is 2 tiles in front of pacman. Only if pacman is facing up, pinkys target is 2 tiles up and 2 tiles to the left.
    o ðŸ˜˜Then the vector from the intermediate tile to Blinky is rotated 180 degrees. This is inkys target tile.
  - ðŸ˜˜Clyde:
    o ðŸ˜˜When >= 8 tiles away from pacMan: Target is PacMan.
    o ðŸ˜˜When < 8 tiles away: Same tile as in scatter mode.
- ðŸ˜˜After 7 seconds, go to hunt mode. After another 20 seconds, go to back to scatter mode
- ðŸ˜˜Enable ghosts to through the tunnel
- ðŸ˜˜findNextTile: Always use waypoints[1] as the next tile instead of searching through waypoints
- ðŸ˜˜Let ghosts move slower in tunnel
- ðŸ˜˜Remove ghost.timestamp
- ðŸ˜˜When entering chase mode, ghosts turn direction 180 degrees
- ðŸ˜˜When entering scatter mode, ghosts turn direction 180 degrees
- When pac man dies
   - ðŸ˜˜let all ghosts pause
   - ðŸ˜˜wait 5 seconds
   - When pac man has some live left
      - ðŸ˜˜revive pac man
      - ðŸ˜˜reset the ghosts
   - ðŸ˜˜ When pac man lost all lives
      - ðŸ˜˜Hide the ghosts and pac man and show "Game Over"
- ðŸ˜˜ Separate SCREEN_TILE_SIZE and SPRITE_TILE_SIZE.


- ðŸ˜˜ When I go to the bottom directly after start, the maze moves around on the screen. Probably because of the target sprite outside the maze.
  - ðŸ˜˜ Debug approach:
    - ðŸ˜˜ in Game constructor, place pac man and ghosts at the bottom
    - ðŸ˜˜ Add a pause key
  - ðŸ˜˜ Idea to fix:
    - ðŸ˜˜ Have a container for all sprites (= Board)
    - ðŸ˜˜ Set it to overflow: none

- ðŸ˜˜ Switch Ant to v4
- ðŸ˜˜ Have ghost state view

- ðŸ˜˜Ghosts that kills pac man enters scatter mode many times, over and over This is most visible in game over, when this happens forever.



- Frightened Mode:
  - ðŸ˜˜ Detect collions with energizers
    - ðŸ˜˜ Increase score
    - ðŸ˜˜ Remove energizer
  - When Pac man eats an energizer
      - ðŸ˜˜ Ghosts enter frightened state
      - ðŸ˜˜ Pac Man enters chasing state
      - ðŸ˜˜ the Frightened timer gets reset to 0
      - ðŸ˜˜ game.killed ghost counter get reset to 0

    - on collision a ghost dies
      - ðŸ˜˜ its state becomes "dead"
      - ðŸ˜˜ dead ghost counter increments
      - ðŸ˜˜ score increases 100, 200, 400, 800
      - ðŸ˜˜ The ghost shows the "eyes" sprite
      - The ghost chooses a target in a corner farthest away and runs quickly
      - No collision detection with a dead ghost

  - in Pacmans chasing state
    - when the energizer timer exceeds the chasing time,
      - Pac man goes back to eating mode
      - Ghosts go to scatter mode
  - in frightened state Ghosts
    - ðŸ˜˜ They show a frightened sprite
    - ðŸ˜˜ They move slowly
    - ðŸ˜˜ In each tile they choose a random direction that is not backward and not into a wall
    - When late in the frightened phase, they show the "late frightened" sprite
          =>  const frightenedGhostTime = 0; in GhostView
    - During the last 2 seconds of being frightened they show a white and blue blinking sprite
    - Fix bug where ghost in tunnel doesnt follow its target tile. Seems to happen also when pacman hits one of the ghosts. With all ghosts.



- I am missing a thing "updateGame" that will start a new round, that will revive pac man, that will change ghost phases.


- Enable ghosts to leave the Box. This requires them to move between tiles. Probably a new state is required:
  - New state leaving_box
  - Provide same waypoints in screen coordinates to follow. Tile  [13.5/15, 13.5/11] and then move either 13/11 or 14/11.
  - Let the ghosts go to the given waypoints.
  - Once the last waypoint is reached, switch to scatter mode.


- When switching from Maze to Game, the Game should be reset.


- Let GamePage have controls to show waypoints
- Show ghost states


